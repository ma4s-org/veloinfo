<div class="absolute w-full max-h-[50%] overflow-auto md:w-[500px] bg-white z-20 bottom-0 rounded-lg">
    <div id="follow" class="flex">
        <div>
            Suivre le trajet
        </div>
        <div>
            {{ error }}
        </div>
        <md-filled-button hx-on:click="clear()" hx-target="#info">annuler</md-filled-button>
    </div>

</div>
<script type="text/javascript">
    map.easeTo({
        pitch: 60,
        duration: 800,
    });
    setTimeout(() => {
        window.geolocate.trigger();
        window.geolocate.trackUserLocation = true;
    }, 1000);

    let interval = setInterval(() => {
        if (!document.getElementById('follow')) {
            clearInterval(interval);
            return;
        }
        navigator.geolocation.getCurrentPosition((position) => {
            let { latitude, longitude } = position.coords;
            var bearing = calculateBearing(
                longitude,
                latitude,
                coordinates[coordinates.length - 1][0],
                coordinates[coordinates.length - 1][1]);
            map.easeTo({
                bearing,
                duration: 800,
            });
            window.geolocate.trigger();
        });
    }, 20000);
</script>